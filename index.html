<html>
<head>

<center>
<h1>Stack Guesser</h1>
<h3>Can you find the accepted answer?</h3>
</center>

<script>
var question = {
  text: "What is 1+1?",
  answers: ["1","2","3","4"],
  correctAnswer: 1
}

function checkAnswer(buttonPressed) {
  document.getElementById(buttonPressed).style.backgroundColor="#660000";
  document.getElementById(buttonPressed).style.color="#FFFFFF";
  document.getElementById(question.correctAnswer).style.backgroundColor="#006600";
  document.getElementById(question.correctAnswer).style.color="#FFFFFF";
  
  for (var i = 0; i < 4; i++) {
  document.getElementById(i).disabled=true;
  }
}

function shuffleAnswers() {
    var array=question.answers;
    for (var i = array.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var temp = array[i];
        array[i] = array[j];
        array[j] = temp;
        
        if (question.correctAnswer===i){
          question.correctAnswer=j;
        }
        else if (question.correctAnswer===j){
          question.correctAnswer=i;
        }
    }
}

function initialize() {
  var request = new XMLHttpRequest();
  request.open('GET', 'http://api.stackexchange.com/2.2/questions/17925577?order=desc&sort=activity&site=stackoverflow&filter=!-*jbN-o8P3E5', true)
  request.onload = function() {
    // Begin accessing JSON data here
    var data = JSON.parse(this.response);
    document.getElementById("questionTitle").innerHTML=data.items[0].title;
    document.getElementById("questionText").innerHTML=data.items[0].body;
    
    for (var i = 0; i < data.items[0].answers.length; i++){
      question.answers[i]=data.items[0].answers[i].body
      if (data.items[0].answers[i].is_accepted==true){
        question.correctAnswer=i;
      }
    }
    shuffleAnswers(question);
    for (var i = 0; i < 4; i++) {
      document.getElementById(i).innerHTML=question.answers[i];
      document.getElementById(i).style.color="#000000";
      document.getElementById(i).style.backgroundColor="#FCFCFC";
      document.getElementById(i).disabled=false;
    };
  }
  request.send();
  
  //shuffleAnswers(question);
  
  //for (var i = 0; i < 4; i++) {
  //  document.getElementById(i).innerHTML=question.answers[i];
  //  document.getElementById(i).style.color="#000000";
  //  document.getElementById(i).style.backgroundColor="#FCFCFC";
  //  document.getElementById(i).disabled=false;
  //};
  
  //document.getElementById("questionText").innerHTML=question.text;
}

</script>

</head>

<body onload="initialize()">

<h2><p id="questionTitle"></p></h2>
<p id="questionText"></p>

<button type="button" id="0" onclick="checkAnswer(this.id)"></button><br />
<button type="button" id="1" onclick="checkAnswer(this.id)"></button><br />
<button type="button" id="2" onclick="checkAnswer(this.id)"></button><br />
<button type="button" id="3" onclick="checkAnswer(this.id)"></button><br />
<br />
<button type="button" onclick="initialize()">Reset</button>

</body>
</html>